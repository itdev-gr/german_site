---
const faqs = [
	{
		question: "Do I need to make a reservation?",
		answer: "Reservations are not required but are highly recommended, especially on weekends or for larger groups. You can book your table online or by calling us directly.",
	},
	{
		question: "Do you offer vegetarian or vegan options?",
		answer: "Yes, we offer a variety of vegetarian and vegan dishes thoughtfully crafted to ensure flavor and satisfaction. Our staff can also help customize certain meals to meet dietary preferences or restrictions.",
	},
	{
		question: "Can I order online for takeaway or delivery?",
		answer: "Absolutely! You can conveniently place your takeaway or delivery orders through our website or by calling us directly. We partner with trusted delivery services to ensure your meal arrives fresh and on time.",
	},
	{
		question: "Do you cater for private events or parties?",
		answer: "Yes, we offer catering services for private events, parties, and corporate gatherings. Whether you're planning an intimate dinner or a large celebration, our team will work with you to create a customized menu and exceptional experience.",
	},
];
---

<section class="faq" id="faq">
	<div class="faq-inner">
		<h2 class="faq-heading">Frequently Asked Questions</h2>
		<div class="faq-list">
			{faqs.map((item, i) => (
				<div class="faq-item" data-index={i}>
					<button type="button" class="faq-question" aria-expanded="false" aria-controls={`faq-answer-${i}`} id={`faq-question-${i}`}>
						<span class="faq-question-text">{item.question}</span>
						<span class="faq-chevron" aria-hidden="true">
							<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</span>
					</button>
					<div class="faq-answer" id={`faq-answer-${i}`} role="region" aria-labelledby={`faq-question-${i}`}>
						<p>{item.answer}</p>
					</div>
				</div>
			))}
		</div>
	</div>
</section>

<style>
	.faq {
		background: var(--color-bg);
		padding: 0.5rem 1.5rem 4rem;
	}

	.faq-inner {
		/* Same width as contact form panel content (button width): 1160px minus panel padding */
		max-width: calc(1160px - 10.86rem);
		margin: 0 auto;
	}

	.faq-heading {
		font-family: var(--font-serif-didone);
		font-size: clamp(2.6rem, 5.2vw, 3.25rem);
		font-weight: 400;
		color: #121f05;
		text-align: center;
		margin-bottom: 2rem;
	}

	.faq-list {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.faq-item {
		background: var(--color-bg);
		border: none;
		border-radius: 0;
		overflow: hidden;
		border-bottom: 1px solid rgba(0, 0, 0, 0.06);
	}

	.faq-item:last-child {
		border-bottom: none;
	}

	.faq-question {
		width: 100%;
		font-family: var(--font-sans);
		font-size: 1rem;
		font-weight: 500;
		color: #333333;
		padding: 1.44rem 1.5rem;
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 1rem;
		text-align: left;
		background: transparent;
		border: none;
		appearance: none;
	}

	.faq-question:hover {
		background: rgba(0, 0, 0, 0.03);
	}

	.faq-question-text {
		flex: 1;
	}

	.faq-chevron {
		flex-shrink: 0;
		color: #333333;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: transform 0.75s ease;
	}

	.faq-item.is-open .faq-chevron {
		transform: rotate(180deg);
	}

	.faq-answer {
		max-height: 0;
		overflow: hidden;
		transition: max-height 0.75s ease-out, padding 0.75s ease-out;
		padding: 0 1.5rem;
	}

	.faq-item.is-open .faq-answer {
		max-height: 20rem;
		padding: 0.75rem 1.5rem 1.25rem 1.75rem;
	}

	.faq-answer p {
		font-family: var(--font-sans);
		font-size: 0.9rem;
		font-weight: 400;
		line-height: 1.65;
		color: #666666;
		margin: 0;
		padding-left: 0.25rem;
	}

	@media (prefers-reduced-motion: reduce) {
		.faq-answer {
			transition: none;
		}
		.faq-chevron {
			transition: none;
		}
	}

	@media (max-width: 768px) {
		.faq {
			padding: 3rem 1rem;
		}

		.faq-question {
			padding: 1.04rem 1rem;
		}

		.faq-answer {
			padding: 0 1rem;
		}

		.faq-item.is-open .faq-answer {
			padding: 0.75rem 1rem 1rem 1.25rem;
		}
	}
</style>

<script>
	function initFaq() {
		const items = document.querySelectorAll(".faq-item");
		items.forEach((item) => {
			const btn = item.querySelector(".faq-question");
			if (!btn) return;
			btn.addEventListener("click", () => {
				const wasOpen = item.classList.contains("is-open");
				items.forEach((other) => {
					other.classList.remove("is-open");
					const otherBtn = other.querySelector(".faq-question");
					if (otherBtn) otherBtn.setAttribute("aria-expanded", "false");
				});
				if (!wasOpen) {
					item.classList.add("is-open");
					btn.setAttribute("aria-expanded", "true");
				}
			});
		});
	}
	if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", initFaq);
	} else {
		initFaq();
	}
</script>
