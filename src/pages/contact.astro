---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import FAQ from "../components/FAQ.astro";
---

<Layout
	title="Kontakt | Naturfreundehaus Wagbachhäusel"
	description="Kontaktieren Sie das Naturfreundehaus Wagbachhäusel – Telefon, E‑Mail, Adresse und Anfahrtsbeschreibung."
>
	<main class="contact-page">
		<section class="contact-layout">
			<div class="contact-copy">
				<h1 class="contact-title">From First Bite To<br />Last Sip</h1>
				<p class="contact-intro">
					Have a question, craving, or special request? We're here to help day or night.
					Whether you're booking a table, planning an event feel free to reach out.
				</p>
			</div>

			<div class="contact-info-grid">
				<div class="info-card">
					<p class="info-label">Call:</p>
					<p class="info-value">
						<a href="tel:+4962053068850">49 6205 3068850</a>
					</p>
				</div>
				<div class="info-card">
					<p class="info-label">Email:</p>
					<p class="info-value">
						<a href="mailto:wagbachauslspotify@gmail.com">wagbachauslspotify@gmail.com</a>
					</p>
				</div>
				<div class="info-card">
					<p class="info-label">Address:</p>
					<p class="info-value">
						<a href="https://maps.app.goo.gl/JMLAt6GHHZi2c7j18" target="_blank" rel="noopener noreferrer">
							Hausstückerweg 1<br />
							68804 Altlußheim
						</a>
					</p>
				</div>
				<div class="info-card">
					<p class="info-label">Opening Hours:</p>
					<p class="info-value">
						Mon - Wed: 11AM-8PM<br />
						Thu- Sun: 11AM-10PM
					</p>
				</div>
			</div>
		</section>

		<section class="contact-visual-block" id="contact-visual-block">
			<div class="contact-image-inner">
				<img src="/images/contact-pasta.png" alt="" loading="lazy" />
			</div>
			<div class="contact-form-panel" id="contact-form-panel">
				<h2 class="contact-form-title">Get In Touch</h2>
				<form class="contact-form" id="contact-form">
					<div class="form-row form-row-two">
						<div class="field">
							<label for="contact-first">First Name <span class="required">*</span></label>
							<input id="contact-first" name="first" type="text" placeholder="Robert" required />
						</div>
						<div class="field">
							<label for="contact-last">Last Name <span class="required">*</span></label>
							<input id="contact-last" name="last" type="text" placeholder="Fox" required />
						</div>
					</div>
					<div class="field">
						<label for="contact-email">Email <span class="required">*</span></label>
						<input id="contact-email" name="email" type="email" placeholder="demo@mail.com" required />
					</div>
					<div class="field">
						<label for="contact-subject">Subject</label>
						<input id="contact-subject" name="subject" type="text" placeholder="Sales" />
					</div>
					<div class="field">
						<label for="contact-message">Message</label>
						<textarea id="contact-message" name="message" rows="4" placeholder="Message"></textarea>
					</div>
					<p class="form-success" id="contact-form-success" aria-live="polite" hidden>Vielen Dank für Ihre Nachricht (Demo).</p>
					<button type="submit" class="contact-form-btn">Book A Table</button>
				</form>
			</div>
		</section>

		<FAQ />

		<Footer />
	</main>
</Layout>

<style>
	.contact-page {
		padding: 4rem 0 0;
		min-height: 100vh;
	}

	.contact-layout {
		/* Align right edge of boxes with nav (nav-inner 1200px centered in 1336px → ends at 1268px) */
		max-width: 1268px;
		margin: 0 0 3rem 0;
		padding: 0 0 0 2rem;
		display: grid;
		grid-template-columns: 720px 1fr;
		gap: 3rem;
		align-items: start;
	}

	.contact-copy {
		text-align: left;
	}

	.contact-title {
		font-family: var(--font-serif);
		font-size: clamp(2.5rem, 5vw, 3.4375rem);
		font-weight: 400;
		color: var(--color-green-dark);
		margin-bottom: 1rem;
		text-align: left;
		line-height: 1.2;
	}

	.contact-intro {
		font-size: 1.05rem;
		color: var(--color-text);
		line-height: 1.6;
		margin-bottom: 0;
	}

	.contact-info-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		grid-template-rows: 1fr 1fr;
		gap: 1.25rem;
		aspect-ratio: 1;
		min-height: 0;
		min-width: 0;
		width: 100%;
		}

	.info-card {
		background: var(--color-bg-cream);
		padding: 1.25rem 1.5rem;
		padding-top: 40%;
		border-radius: 0;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
		min-width: 0;
		min-height: 0;
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}

	.info-label {
		font-family: var(--font-sans);
		font-size: 0.85rem;
		font-weight: 500;
		color: #a5a09f;
		margin-bottom: 0.35rem;
		flex-shrink: 0;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		text-align: center;
	}

	.info-value {
		font-size: 1rem;
		color: var(--color-text);
		margin: 0;
		line-height: 1.5;
		flex: 1;
		min-height: 0;
		overflow: hidden;
		word-wrap: break-word;
		overflow-wrap: break-word;
		text-align: center;
	}

	.info-value a {
		color: var(--color-text);
		text-decoration: none;
		word-wrap: break-word;
		overflow-wrap: break-word;
	}

	.info-value a:hover {
		color: var(--color-accent);
		text-decoration: underline;
	}

	.contact-visual-block {
		position: relative;
		min-height: 85vh;
		width: 100%;
		margin-bottom: calc(8rem + 15vh);
	}

	.contact-image-inner {
		position: absolute;
		inset: 0;
		overflow: hidden;
		background: var(--color-bg);
	}

	.contact-image-inner img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
	}

	.contact-form-panel {
		position: absolute;
		top: 40%;
		left: 7.5%;
		right: 7.5%;
		width: auto;
		transform: translateY(24px);
		background: #fbf7f1;
		padding: 2.5rem;
		display: flex;
		flex-direction: column;
		justify-content: center;
		box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
		opacity: 0;
		transition: opacity 0.5s ease, transform 0.5s ease;
	}

	.contact-visual-block.contact-form-visible .contact-form-panel {
		opacity: 1;
		transform: translateY(0);
	}

	.contact-form-title {
		font-family: var(--font-serif);
		font-size: 1.75rem;
		font-weight: 400;
		color: var(--color-green-dark);
		margin-bottom: 1.5rem;
	}

	.contact-form {
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
		width: 100%;
		max-width: 100%;
	}

	.form-row {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.form-row-two {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 1rem;
	}

	.contact-form .field {
		display: flex;
		flex-direction: column;
		gap: 0.35rem;
	}

	.contact-form label {
		font-family: var(--font-serif);
		font-size: 0.95rem;
		font-weight: 400;
		color: var(--color-green-dark);
	}

	.contact-form .required {
		color: var(--color-accent);
	}

	.contact-form input,
	.contact-form textarea {
		font-family: var(--font-serif);
		font-size: 1rem;
		font-weight: 400;
		padding: 0.6rem 0.75rem;
		border: 1px solid rgba(0, 0, 0, 0.15);
		border-radius: 8px;
		background: var(--color-surface);
		color: var(--color-green-dark);
	}

	.contact-form input::placeholder,
	.contact-form textarea::placeholder {
		font-family: var(--font-serif);
		color: var(--color-text-muted);
		opacity: 0.8;
	}

	.contact-form input:focus,
	.contact-form textarea:focus {
		outline: none;
		border-color: var(--color-accent);
	}

	.contact-form textarea {
		resize: vertical;
		min-height: 100px;
	}

	.form-success {
		font-family: var(--font-serif);
		font-size: 0.95rem;
		font-weight: 400;
		color: var(--color-green-dark);
		margin: 0;
	}

	.contact-form-btn {
		background: #1a2e0a;
		color: white;
		border: none;
		padding: 0.75rem 1.5rem;
		font-size: 1rem;
		font-weight: 400;
		font-family: var(--font-serif);
		cursor: pointer;
		border-radius: 0;
		transition: background 0.2s, transform 0.15s;
		align-self: stretch;
		width: 100%;
	}

	.contact-form-btn:hover {
		background: #243d12;
		transform: translateY(-1px);
	}

	@media (max-width: 768px) {
		.contact-form-panel {
			padding: 1.5rem;
			left: 7.5%;
			right: 7.5%;
			width: auto;
			transform: translateY(24px);
			box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
		}

		.contact-visual-block.contact-form-visible .contact-form-panel {
			transform: translateY(0);
		}

		.contact-layout {
			grid-template-columns: 1fr;
			padding: 0 1rem;
			gap: 2rem;
		}

		.contact-info-grid {
			grid-template-columns: 1fr;
			aspect-ratio: auto;
			max-width: 400px;
		}

		.form-row-two {
			grid-template-columns: 1fr;
		}
	}
</style>

<script>
	const form = document.getElementById("contact-form") as HTMLFormElement | null;
	const successEl = document.getElementById("contact-form-success");
	const visualBlock = document.getElementById("contact-visual-block");

	if (form && successEl) {
		form.addEventListener("submit", (e) => {
			e.preventDefault();
			successEl.hidden = false;
		});
	}

	if (visualBlock) {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						entry.target.classList.add("contact-form-visible");
					}
				});
			},
			{ threshold: 0.15 }
		);
		observer.observe(visualBlock);
	}
</script>
